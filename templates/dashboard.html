<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
</head>
<body>
    {% include 'template.html' %}

    {% block content %}
<div class="container mt-5" style="backdrop-filter: blur(20px);">
    <h2>Welcome, {{ current_user.username }}!</h2>
    <p>Your Book Collection:</p>

    <div id="book-list" class="row mt-4">
        {% for book in books %}
            <div class="col-md-3 mb-4" id="book-{{ book.id }}" class="draggable" data-id="{{ book.id }}">
                <div class="card">
                    <!-- Thumbnail Image -->
                    <img src="{{ book.thumbnail }}" class="card-img-top" alt="Book Thumbnail">
                    
                    <div class="card-body">
                        <h5 class="card-title">{{ book.title }}</h5>
                        <p class="card-text">Author: {{ book.author }}</p>
                        <p class="card-text">{{ book.description[:100] }}...</p>
                        {% if book.rating %}
                            <p class="card-text">Rating: {{ book.rating }}</p>
                        {% endif %}
                        
                        <!-- Remove Book Button -->
                        <form method="POST" action="{{ url_for('remove_book_from_shelf', book_id=book.id) }}">
                            <button type="submit" class="btn btn-danger btn-sm mt-2">Remove Book</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    
    <a href="{{ url_for('logout') }}" class="btn btn-danger mt-3">Logout</a>
</div>
{% endblock %}

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

</body>
</html>
